# Onboarding Flow Diagram

## User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         First Launch                                 â”‚
â”‚                                                                      â”‚
â”‚  User opens CNL â†’ App.tsx checks onboarding status                  â”‚
â”‚                     â†“                                                â”‚
â”‚           GET /v1/settings/onboarding-status                         â”‚
â”‚                     â†“                                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚         â”‚  complete: false        â”‚                                  â”‚
â”‚         â”‚  missing: [meraki, ai]  â”‚                                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                     â†“                                                â”‚
â”‚           Show OnboardingWizard                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Step 1: Welcome                              â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   ğŸ”· CNL Logo                                         â”‚           â”‚
â”‚  â”‚   Welcome to CNL                                      â”‚           â”‚
â”‚  â”‚   Cisco Neural Language                               â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   ğŸ“¡ Network Discovery                                â”‚           â”‚
â”‚  â”‚   âš¡ Natural Language Configuration                   â”‚           â”‚
â”‚  â”‚   ğŸ”„ Workflow Automation                              â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   [Get Started]                                       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                     â†“                                                â”‚
â”‚                Click "Get Started"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Step 2: Meraki Credentials                        â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Connect Your Meraki Organization                    â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   API Key: [********************]  (password field)   â”‚           â”‚
â”‚  â”‚   Org ID:  [123456]                                   â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   â„¹ï¸ How to get credentials:                          â”‚           â”‚
â”‚  â”‚   1. Log in to dashboard.meraki.com                   â”‚           â”‚
â”‚  â”‚   2. Organization â†’ Settings â†’ API                    â”‚           â”‚
â”‚  â”‚   3. Generate new API key                             â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   [Back]  [Validate] [Validate & Continue]            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                     â†“                                                â”‚
â”‚         POST /v1/credentials/validate                                â”‚
â”‚         {type: "meraki", api_key, org_id}                            â”‚
â”‚                     â†“                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   âœ… Credentials validated successfully!              â”‚           â”‚
â”‚  â”‚   Connected to: Acme Corp                             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                     â†“                                                â”‚
â”‚         POST /v1/credentials/provider/meraki                         â”‚
â”‚         {api_key, org_id}                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Step 3: AI Provider                               â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Configure AI Provider                               â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   AI Provider:                                        â”‚           â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚           â”‚
â”‚  â”‚   â”‚ ğŸ”µ Anthropic   â”‚  â”‚   OpenAI       â”‚            â”‚           â”‚
â”‚  â”‚   â”‚   Claude       â”‚  â”‚   GPT          â”‚            â”‚           â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚           â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚           â”‚
â”‚  â”‚   â”‚   Google       â”‚  â”‚   Ollama       â”‚            â”‚           â”‚
â”‚  â”‚   â”‚   Gemini       â”‚  â”‚   (Local)      â”‚            â”‚           â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   API Key: [********************]  (password)        â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   â„¹ï¸ Visit console.anthropic.com â†’ API Keys          â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   [Back]  [Validate] [Validate & Continue]            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                     â†“                                                â”‚
â”‚         POST /v1/credentials/validate                                â”‚
â”‚         {type: "ai", provider, api_key}                              â”‚
â”‚                     â†“                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   âœ… Connection successful!                           â”‚           â”‚
â”‚  â”‚   Connected to Anthropic Claude                       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                     â†“                                                â”‚
â”‚         POST /v1/credentials/provider/anthropic                      â”‚
â”‚         {api_key}                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Step 4: Success                                â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   âœ… All Set!                                         â”‚           â”‚
â”‚  â”‚   Your CNL environment is configured                  â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   âœ”ï¸ Meraki Dashboard Connected                       â”‚           â”‚
â”‚  â”‚      Your organization credentials validated          â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   âœ”ï¸ AI Provider Configured                           â”‚           â”‚
â”‚  â”‚      Natural language processing ready                â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   ğŸ“ What's next?                                     â”‚           â”‚
â”‚  â”‚   â€¢ Run full network discovery                        â”‚           â”‚
â”‚  â”‚   â€¢ Chat with CNL to configure devices                â”‚           â”‚
â”‚  â”‚   â€¢ Create automated workflows                        â”‚           â”‚
â”‚  â”‚   â€¢ Generate reports                                  â”‚           â”‚
â”‚  â”‚                                                       â”‚           â”‚
â”‚  â”‚   [âš™ï¸ Go to Settings]  [ğŸš€ Start Discovery]           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                     â†“                                                â”‚
â”‚         PUT /v1/settings                                             â”‚
â”‚         {onboarding_complete: true}                                  â”‚
â”‚                     â†“                                                â”‚
â”‚         Navigate to chat interface                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management

```typescript
// useOnboarding hook state
{
  currentStep: 'welcome' | 'meraki' | 'ai-provider' | 'success',
  formData: {
    meraki: {
      apiKey: string,
      orgId: string
    },
    ai: {
      provider: 'anthropic' | 'openai' | 'google' | 'ollama',
      apiKey?: string
    }
  },
  isLoading: boolean,
  onboardingComplete: boolean | null
}
```

## Validation Flow

```
User enters credentials
       â†“
Click "Validate"
       â†“
validationState = 'validating'
       â†“
POST /v1/credentials/validate
       â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Response   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“           â†“
    Success     Failure
       â†“           â†“
validationState  validationState
  = 'success'     = 'error'
       â†“           â†“
Show green      Show red
checkmark       X icon
+ message       + error
       â†“           â†“
Enable         User fixes
"Continue"     credentials
button         & retries
```

## Progress Indicator

```
Step 1 of 4          Step 2 of 4          Step 3 of 4          Step 4 of 4
â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â†’  â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘  â†’  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘  â†’  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
25% complete         50% complete         75% complete         100% complete
```

## Error Handling

```
API Call Fails
     â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Validation Failed                 â”‚
  â”‚ [Error message from API]          â”‚
  â”‚                                   â”‚
  â”‚ Possible causes:                  â”‚
  â”‚ â€¢ Invalid API key                 â”‚
  â”‚ â€¢ Network error                   â”‚
  â”‚ â€¢ Service unavailable             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
User can:
â€¢ Retry validation
â€¢ Go back to fix input
â€¢ Check network connection
```

## Security Measures

1. **Password Fields**
   - All API key inputs use `type="password"`
   - Never displayed in plain text

2. **POST for Validation**
   - Credentials sent in request body (not URL)
   - Prevents logging in server access logs

3. **State Clearing**
   - Credentials cleared from component state after save
   - No lingering sensitive data in memory

4. **Debounced Validation**
   - Prevents rapid-fire duplicate API calls
   - Reduces attack surface

## Component Hierarchy

```
App.tsx
  â””â”€ OnboardingWizard
      â”œâ”€ WelcomeStep
      â”‚   â””â”€ Button (Get Started)
      â”œâ”€ MerakiKeyStep
      â”‚   â”œâ”€ Input (API Key)
      â”‚   â”œâ”€ Input (Org ID)
      â”‚   â””â”€ Button (Validate & Continue)
      â”œâ”€ AIProviderStep
      â”‚   â”œâ”€ Provider Selector (4 options)
      â”‚   â”œâ”€ Input (API Key)
      â”‚   â””â”€ Button (Validate & Continue)
      â””â”€ SuccessStep
          â”œâ”€ Button (Go to Settings)
          â””â”€ Button (Start Discovery)
```

## API Contract

### GET /v1/settings/onboarding-status
```json
Response:
{
  "complete": false,
  "missing": ["meraki", "ai"]
}
```

### POST /v1/credentials/validate
```json
Request (Meraki):
{
  "type": "meraki",
  "api_key": "abc123...",
  "org_id": "123456"
}

Response (Success):
{
  "valid": true,
  "message": "Credentials validated",
  "orgName": "Acme Corp"
}

Response (Failure):
{
  "valid": false,
  "message": "Invalid API key or Organization ID"
}
```

### POST /v1/credentials/provider/meraki
```json
Request:
{
  "api_key": "abc123...",
  "org_id": "123456"
}

Response:
{
  "success": true,
  "message": "Credentials saved"
}
```

### PUT /v1/settings
```json
Request:
{
  "onboarding_complete": true
}

Response:
{
  "success": true
}
```
