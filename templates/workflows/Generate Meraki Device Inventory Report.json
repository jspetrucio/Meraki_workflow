{
  "workflow": {
    "unique_name": "definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw",
    "name": "Generate Meraki Device Inventory Report",
    "title": "Generate Meraki Device Inventory Report",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Error Message",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RS09IYKFB3G1VbmPyGAuhYKcZEOCIJYFG",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Remote Linux Directory/Name Prefix",
          "type": "datatype.string",
          "description": "Edit this value to match the location and any name attributes that correspond to your environment\n\nFor example\n/home/johnd/reports/meraki_devices_output-\n\nThe workflow will automatically attach a Timestamp to make the destination CSV file unique. ",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RRV9EA9DQA90Yy32chGdSMfkTAfY0fDlW",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Status Code",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Results",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RRV9EA9D11M1yZUXdmVF89Jxw88cI6h7O",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Status Message",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "Organization Name",
          "type": "datatype.string",
          "description": "This workflow requires the Operator to provide the name of their Organization.",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RRV9EA9C2RI5IWH5XvLHWGLkAZLPHCfwj",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "delete_workflow_instance": false,
      "description": "**Workflow Operations** \n- Operator passes a valid Meraki Organization Name that is converted to an ID\n- Derive all Networks and Devices deployed in that Organization\n- Create a CSV file that will be used to store the data\n- Write that Report out to a predefined location\n\n**Example CSV File Format for this Workflow:**\nNetwork,Serial,productType,Status\nHotel Network,Q4AC-24GS-WM8C,switch,online\nCampus Fabric,Q5TQ-XPHH-XSEN,switch,offline\n",
      "display_name": "Generate Meraki Device Inventory Report",
      "runtime_user": {
        "override_target_runtime_user": false,
        "specify_on_workflow_start": false,
        "target_default": true
      },
      "target": {
        "target_type": "meraki.endpoint",
        "specify_on_workflow_start": true
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_02RRYZG9GOTKS5KNS5Ch2eL3oAHZCl8br6Y",
        "name": "Group",
        "title": "Process Organization Name",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "description": "User must provide a valid Organization Name that can be converted into an OrgID",
          "display_as_suggestion": false,
          "display_name": "Process Organization Name",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RRZ0AUR723W4DTUSOcV3zNXFy8tUkzqvm",
            "name": "Meraki - Get Organization By Name or ID",
            "title": "Meraki - Get Organization By Name or ID",
            "type": "workflow.sub_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": true,
              "description": "Utility workflow to retrieve organization details using either Organization Name or ID as input. Calls Meraki API to fetch all accessible organizations, then searches for the specified match.\n\n**Returns:** Organization ID, name, URL, API status, licensing model, cloud region, and management details.\n\n**Key Features:**\n- Search by Organization Name (exact match, case-sensitive)\n- Search by Organization ID (numeric format)\n- Comprehensive output variables\n- Optional error handling with 'Ignore Errors' parameter\n- Suitable for validation and automation workflows",
              "display_name": "Meraki - Get Organization By Name or ID",
              "input": {
                "variable_workflow_02M605GTHU5L72i8goD4nuYixYOvQEFV7rN": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.input.variable_workflow_02RRV9EA9C2RI5IWH5XvLHWGLkAZLPHCfwj$",
                "variable_workflow_02M605GTI1LUG737lDLyzxnE9jwENJNQ08W": false
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "target_type": "meraki.endpoint",
                "use_workflow_target": true
              },
              "workflow_id": "definition_workflow_02M605GS81XN44qr4RBWrJ6Zazk7k0ArIYX",
              "workflow_name": "Meraki - Get Organization By Name or ID"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RRZ1BED6IHQ7KouaXzCQO0PUBayRvFHle",
            "name": "Condition Block",
            "title": "Validate Organization",
            "type": "logic.if_else",
            "base_type": "activity",
            "properties": {
              "conditions": [],
              "continue_on_failure": false,
              "description": "Ensure Meraki Organization was found",
              "display_name": "Validate Organization",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "blocks": [
              {
                "unique_name": "definition_activity_02RRZ1BG51C6J2TWOd0ja8eTC1PH3UNPwRi",
                "name": "Condition Branch",
                "title": "Check Status Code",
                "type": "logic.condition_block",
                "base_type": "activity",
                "properties": {
                  "condition": {
                    "left_operand": "$activity.definition_activity_02RRZ0AUR723W4DTUSOcV3zNXFy8tUkzqvm.output.variable_workflow_02M605GTHEWOW4TGG1xjMEivKqrrMbc2hM3$",
                    "operator": "ne",
                    "right_operand": 200
                  },
                  "continue_on_failure": false,
                  "display_name": "Check Status Code",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02RRZ2B6WU5W81VkC0cL7hVJ0rdSyfHwF4f",
                    "name": "Set Variables",
                    "title": "Generate Output Variables",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "description": "Set Variables",
                      "display_name": "Generate Output Variables",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X$",
                          "variable_value_new": "$activity.definition_activity_02RRZ0AUR723W4DTUSOcV3zNXFy8tUkzqvm.output.error.code$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RS09IYKFB3G1VbmPyGAuhYKcZEOCIJYFG$",
                          "variable_value_new": "$activity.definition_activity_02RRZ0AUR723W4DTUSOcV3zNXFy8tUkzqvm.output.error.message$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ$",
                          "variable_value_new": "Workflow Failed to run Properly."
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RRZ3MKE9VNB5xKVJKyBqjGmjC7mEdDBJn",
                    "name": "Completed",
                    "title": "Workflow Completed",
                    "type": "logic.completed",
                    "base_type": "activity",
                    "properties": {
                      "completion_type": "failed-completed",
                      "continue_on_failure": false,
                      "description": "Completed action",
                      "display_name": "Workflow Completed",
                      "result_message": "Unable to Retrieve Organization. See Output Data for information on the failure.",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RRV9F39CU7H5wQJtuik8udYkQqnVrEMyJ",
        "name": "Group",
        "title": "Get Meraki Devices and Meraki Networks",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "description": "Use the Meraki Atomics to pull the Devices and the Networks from the Organization provided",
          "display_as_suggestion": false,
          "display_name": "Get Meraki Devices and Meraki Networks",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RRW1D1NQM936kFJQMC1zgWcxsihgY7h5q",
            "name": "Meraki - Get Organization Devices Availabilities",
            "title": "Meraki - Get Organization Devices Availabilities",
            "type": "workflow.atomic_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": true,
              "description": "List the availability information for devices in an organization. The data returned by this endpoint is updated every 5 minutes.",
              "display_name": "Meraki - Get Organization Devices Availabilities",
              "input": {
                "variable_workflow_02OARCKDXWO6W6SU6960YFGFvHG0ygUnjQu": "$activity.definition_activity_02RRZ0AUR723W4DTUSOcV3zNXFy8tUkzqvm.output.variable_workflow_02M605GTJITQP1fcLQlR8CLYAHoMomGWZvE$",
                "variable_workflow_02P699F2UW3346R68SrDYaoNBs521DsAZ73": "",
                "variable_workflow_02P699F2UW3UW3Ok59HZOH1iG1V5jV9v0qM": "",
                "variable_workflow_02P699F2UW4MO4eMTZgxy1HnfAePHK0QeOY": "",
                "variable_workflow_02P699F2UW5EG6HP8fB6gtaCXnPOdetQEPD": "[]",
                "variable_workflow_02P699F2UW6680xJhNVrnuOlT2CEnGlNn13": "[]",
                "variable_workflow_02P699F2UW6Y00HXyRNe0eLGuSyjB8oufwV": "[]",
                "variable_workflow_02P699F2UW7PS57N95ajtM7hHaAwowBRlSI": "[]",
                "variable_workflow_02P699F2UW99C7VOPaTjcTsm3aJlU6dCr2b": "",
                "variable_workflow_02P699F2UWA1420AFEpZiZSz8Co6cdX8DSN": "[]"
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "target_type": "meraki.endpoint",
                "use_workflow_target": true
              },
              "workflow_id": "definition_workflow_02OARCKDXWKC05IDjPSq5F51WkIsFF0DF1K",
              "workflow_name": "Meraki - Get Organization Devices Availabilities"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RRZ3Z9MLPBP5pmTmjjYfpmlvkgoL0heOL",
            "name": "Condition Block",
            "title": "Validate Devices Retrieved",
            "type": "logic.if_else",
            "base_type": "activity",
            "properties": {
              "conditions": [],
              "continue_on_failure": false,
              "description": "If-Else condition block",
              "display_name": "Validate Devices Retrieved",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "blocks": [
              {
                "unique_name": "definition_activity_02RRZ3Z9NREB87OLOonrzXNDhaf6YzTiQyK",
                "name": "Condition Branch",
                "title": "Check for Error On Retrieval",
                "type": "logic.condition_block",
                "base_type": "activity",
                "properties": {
                  "condition": {
                    "left_operand": "$activity.definition_activity_02RRW1D1NQM936kFJQMC1zgWcxsihgY7h5q.output.variable_workflow_02OARCKDXWS1S3BIbkAHx9yqx0U5vzSTrIF$",
                    "operator": "ne",
                    "right_operand": 200
                  },
                  "continue_on_failure": false,
                  "display_name": "Check for Error On Retrieval",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02RRZ3Z9PDE4O4bs6d0vEb3qEbiv8AgePXl",
                    "name": "Set Variables",
                    "title": "Set Output Variables",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "description": "Propagate Values to the Operator",
                      "display_name": "Set Output Variables",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X$",
                          "variable_value_new": "$activity.definition_activity_02RRW1D1NQM936kFJQMC1zgWcxsihgY7h5q.output.variable_workflow_02OARCKDXWS1S3BIbkAHx9yqx0U5vzSTrIF$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RS09IYKFB3G1VbmPyGAuhYKcZEOCIJYFG$",
                          "variable_value_new": "$activity.definition_activity_02RRW1D1NQM936kFJQMC1zgWcxsihgY7h5q.output.error.message$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ$",
                          "variable_value_new": "Workflow Failed to run Properly."
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RRZ3Z9RQN2H14L2E5mGnDMG1M57VwXq4l",
                    "name": "Completed",
                    "title": "Workflow Completed",
                    "type": "logic.completed",
                    "base_type": "activity",
                    "properties": {
                      "completion_type": "failed-completed",
                      "continue_on_failure": false,
                      "description": "Completed action",
                      "display_name": "Workflow Completed",
                      "result_message": "Unable to Retrieve Devices. See Output Data for information on the failure.",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          },
          {
            "unique_name": "definition_activity_02RRW8XR1BHKA1S1IFqVgIbiXC3zIp6FBgc",
            "name": "Meraki - Get Organization Networks",
            "title": "Meraki - Get Organization Networks",
            "type": "workflow.atomic_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": true,
              "description": "**Cisco Meraki - Networks - Get Organization Networks**\n\nList the networks that the user has privileges on in an organization\n\n**Target:** A Meraki Endpoint using HTTPS \"api.meraki.com\" port 443 and no path.\n\n**Account Key:** Meraki User API Key. API Key can be generated from Meraki Dashboard -> User Profile -> API Access.\n\nSteps:\n[] Sends Get Network request to Meraki\n[] Check if the request was successful:\n[]> If it was, attempt to extract the results and set the output variables\n[]> If it wasn't, return the error and marks the workflow as failed.\n\nNOTE: Empty attributes in the request are removed from the payload before sending to Meraki. \n\nMore information about this API: https://developer.cisco.com/meraki/api-v1/get-organization-networks/",
              "display_name": "Meraki - Get Organization Networks",
              "input": {
                "variable_workflow_02L9TZH6C81473IDtFQ0NIzW3jmXrgchtN9": "$activity.definition_activity_02RRZ0AUR723W4DTUSOcV3zNXFy8tUkzqvm.output.variable_workflow_02M605GTJITQP1fcLQlR8CLYAHoMomGWZvE$",
                "variable_workflow_02LEUL5GOHN9T53T7jFQx3T2Yo04p5Xuz0r": false,
                "variable_workflow_02LNK5WW0RD2A20mG7v1G7gsyE2N2RrKdQd": "",
                "variable_workflow_02LNK5WW0RTCB1AXbOwJOBVWvUx1wdyKtkt": "withAnyTags",
                "variable_workflow_02LNK5WW0S5E21Q9biFSXTiLbHr7cWP2K7y": "",
                "variable_workflow_02LNK5WW0SE2H1zmchhUHyfX7L0XGvKmB7W": 1000,
                "variable_workflow_02LNK5WW0SM7R5SjIvnnytN6vYzR7wfDHeE": [],
                "variable_workflow_02LNK5WW0STMX38BXiY2IvPQoHQliJHSCgE": [],
                "variable_workflow_02LNK5WW0T0NX26NyApdlTn355uYJwcQGqW": "",
                "variable_workflow_02LNK5WW0T92U1HJd1sxzFrmVvwxy7NVaQn": ""
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "target_type": "meraki.endpoint",
                "use_workflow_target": true
              },
              "workflow_id": "definition_workflow_02L9TZH5W95870XebPF2g8kSyIYcawUvljX",
              "workflow_name": "Meraki - Get Organization Networks"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RRZ59F1NIH62IOVQyzn0GrXDYq30AV6zh",
            "name": "Condition Block",
            "title": "Validate Networks Retrieved",
            "type": "logic.if_else",
            "base_type": "activity",
            "properties": {
              "conditions": [],
              "continue_on_failure": false,
              "description": "If-Else condition block",
              "display_name": "Validate Networks Retrieved",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "blocks": [
              {
                "unique_name": "definition_activity_02RRZ59F2SOZ85r3OmaamMoMdtKMcRiLAvD",
                "name": "Condition Branch",
                "title": "Check for Errors Retrieving Networks",
                "type": "logic.condition_block",
                "base_type": "activity",
                "properties": {
                  "condition": {
                    "left_operand": "$activity.definition_activity_02RRW8XR1BHKA1S1IFqVgIbiXC3zIp6FBgc.output.variable_workflow_02L9TZH6C9HVU3eHnLNP91ZKEfJOnaYpBsh$",
                    "operator": "ne",
                    "right_operand": 200
                  },
                  "continue_on_failure": false,
                  "display_name": "Check for Errors Retrieving Networks",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02RRZ59F4CP4C3QKAyVfoBe5q1vXkIb4nsk",
                    "name": "Set Variables",
                    "title": "Set Output Variables",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "description": "Propagate Values to the Operator",
                      "display_name": "Set Output Variables",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X$",
                          "variable_value_new": "$activity.definition_activity_02RRW8XR1BHKA1S1IFqVgIbiXC3zIp6FBgc.output.error.code$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RS09IYKFB3G1VbmPyGAuhYKcZEOCIJYFG$",
                          "variable_value_new": "$activity.definition_activity_02RRW8XR1BHKA1S1IFqVgIbiXC3zIp6FBgc.output.error.message$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ$",
                          "variable_value_new": "Workflow Failed to run Properly."
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RRZ59F6EUAS3ACgqTXR6kbOwXJYJpJi9j",
                    "name": "Completed",
                    "title": "Completed",
                    "type": "logic.completed",
                    "base_type": "activity",
                    "properties": {
                      "completion_type": "failed-completed",
                      "continue_on_failure": false,
                      "description": "Completed action",
                      "display_name": "Completed",
                      "result_message": "Unable to Retrieve Networks. See Output Data for information on the failure.",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RRWQMUF3UTR1sYvoMuAOViSxE2qCUynUN",
        "name": "Group",
        "title": "Build the CSV File",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "description": "The Designer can choose to build using an AI LLM to or Python to perform Data Transformation.\n\nThe LLM is very simple and easy to change. However, some organizations may not want LLM use in their workflows and as such that method is disabled in the Workflow. \n\nThe default method is to use Python to Generate the CSV file. If the designer does not want this, they would:\n  * \"Skip\" the Python Execution\n  * Modify \"Write File\" to use the \"Content\" output from the \"LLM Prompt\" activity.\n  * Modify \"Check CSV Generated\" to look at \"LLM Prompt\" result.\n  * Modify \"Setup Output Variables\" Section to use outputs from \"LLM Prompt\"",
          "display_as_suggestion": false,
          "display_name": "Build the CSV File",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RRVUUJ3EKED1DdJ8NzPtQYnjZujPw6mIJ",
            "name": "LLM Prompt",
            "title": "Optional AI Generation",
            "type": "activity.openai_structured_output_agent",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "chat_messages": [
                {
                  "content": "You are data transformation tool. You take JSON information and create CSV files.",
                  "role": "user"
                }
              ],
              "continue_on_failure": false,
              "description": "Optional Method to Create CSV instead of using Python Module below.\n\nThis requies AI Target to be setup in Workflows. Uses the Prompts setup in this Activity to have AI automatically generate a CSV file with the required informaiton. \n\nPlease note if this method is preferred, then then the \"Skip Activity Execution\" should be unchecked in this activity and enabled in the Python Activty which is currently the default.\n\nAlso, the CSV content output from this function would be used in subsequent steps vs. the \"csv_output\" created in the Python Module.",
              "display_name": "Optional AI Generation",
              "modelName": "gpt-5-mini",
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": true,
              "systemPrompt": "Please take the JSON output:\n$activity.definition_activity_02RRW1D1NQM936kFJQMC1zgWcxsihgY7h5q.output.variable_workflow_02OARCKDXWTLC3SxGvWGD3RJnQ67Y1vrshL$\n\nEach entry represents a Meraki Device in a Network,using this format:\n{\n    \"mac\": \"2c:3f:0b:d0:98:70\",\n    \"name\": \"\",\n    \"network\": {\n      \"id\": \"L_615867249042926018\"\n    },\n    \"productType\": \"appliance\",\n    \"serial\": \"Q2KY-TDSC-5ANK\",\n    \"status\": \"online\",\n    \"tags\": [\n      \"recently-added\"\n    ]\n  }\n\nParse the JSON Output and build a CSV  output with these headers:\nNetwork,Serial,productType, Status\n\nFor Each Device derive \"Network\" by finding a match for \"id\" in this JSON Ouptut:\n$activity.definition_activity_02RRW8XR1BHKA1S1IFqVgIbiXC3zIp6FBgc.output.variable_workflow_02L9TZH6C8OZI7c9t9Z0h0JHAbqCc7LuTGT$\nMatch the \"id\" to the string in \"name\" and use that for our \"Network\" column in our CSV.\nFor Each Device derive \"Serial\" from \"serial\"\nFor Each Device derive \"productType\" from \"productType\"\nFor Each Device derive \"Status\" from \"status\"\n\nIn the CSV, order common \"Network\" values together rather than radomly having different networks on each line.\n\n\n",
              "target": {
                "override_workflow_target": true,
                "target_id": "definition_target_02OGWOA691Y2R6SenTABdjAhM0VxK5p6Bov"
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RRX1VN31PUH0PEp0jQiKQlhJUTiB01evj",
            "name": "Execute Python Script",
            "title": "Generate CSV with Python (Default)",
            "type": "python3.script",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": true,
              "description": "Using Python take the data retrieved and build a CSV file that is returned in the output variable, \"csv_output\".\n\nIf using Python is not preferred, the use of the AI Activity above can be enabled instead.  ",
              "display_name": "Generate CSV with Python (Default)",
              "script": "#!/usr/bin/env python3\n\"\"\"\nGenerate a CSV of Meraki devices with their Network names.\n\n- JSON data is statically assigned in this file.\n- CSV columns: Network,Serial,productType,Status\n- Rows grouped by Network (sorted by Network name, then Serial)\n\"\"\"\n\nimport json\nimport csv\nimport io\nfrom typing import Any, Dict, List\n\n\n# ============================\n#  STATIC JSON INPUT\n# ============================\n\nDEVICES_JSON = \"\"\"$activity.definition_activity_02RRW1D1NQM936kFJQMC1zgWcxsihgY7h5q.output.variable_workflow_02OARCKDXWTLC3SxGvWGD3RJnQ67Y1vrshL$\"\"\"\nNETWORKS_JSON = \"\"\"$activity.definition_activity_02RRW8XR1BHKA1S1IFqVgIbiXC3zIp6FBgc.output.variable_workflow_02L9TZH6C8OZI7c9t9Z0h0JHAbqCc7LuTGT$\"\"\"\n\n# ============================\n#  LOGIC\n# ============================\n\ndef parse_json_array(json_str: str, label: str) -> List[Dict[str, Any]]:\n    try:\n        data = json.loads(json_str)\n    except json.JSONDecodeError as e:\n        raise ValueError(f\"Invalid JSON in {label}: {e}\") from e\n\n    if not isinstance(data, list):\n        raise ValueError(f\"{label} must be a JSON array\")\n\n    return data\n\n\ndef build_network_id_to_name_map(networks: List[Dict[str, Any]]) -> Dict[str, str]:\n    mapping: Dict[str, str] = {}\n    for net in networks:\n        net_id = net.get(\"id\")\n        if net_id:\n            mapping[net_id] = net.get(\"name\", net_id)\n    return mapping\n\n\ndef build_rows(devices: List[Dict[str, Any]], net_id_to_name: Dict[str, str]) -> List[Dict[str, str]]:\n    rows: List[Dict[str, str]] = []\n    for dev in devices:\n        net_id = dev.get(\"network\", {}).get(\"id\", \"\")\n        rows.append({\n            \"Network\": net_id_to_name.get(net_id, net_id),\n            \"Serial\": dev.get(\"serial\", \"\"),\n            \"productType\": dev.get(\"productType\", \"\"),\n            \"Status\": dev.get(\"status\", \"\")\n        })\n\n    rows.sort(key=lambda r: (r[\"Network\"], r[\"Serial\"]))\n    return rows\n\n\ndef write_csv_to_string(rows: List[Dict[str, str]]) -> str:\n    fieldnames = [\"Network\", \"Serial\", \"productType\", \"Status\"]\n\n    # Force UNIX newlines by controlling lineterminator and StringIO behavior\n    buffer = io.StringIO(newline=\"\")\n\n    writer = csv.DictWriter(\n        buffer,\n        fieldnames=fieldnames,\n        lineterminator=\"\\n\"   # <-- THIS FIXES THE ^M ISSUE\n    )\n\n    writer.writeheader()\n    for row in rows:\n        writer.writerow(row)\n\n    return buffer.getvalue()\n\n\n# ============================\n#  RUN\n# ============================\n\ndevices = parse_json_array(DEVICES_JSON, \"DEVICES_JSON\")\nnetwork_list = parse_json_array(NETWORKS_JSON, \"NETWORKS_JSON\")\n\nnet_id_to_name = build_network_id_to_name_map(network_list)\nrows = build_rows(devices, net_id_to_name)\n\ncsv_output = write_csv_to_string(rows)\n\nprint(csv_output)",
              "script_queries": [
                {
                  "script_query": "csv_output",
                  "script_query_name": "csv_output",
                  "script_query_type": "string"
                }
              ],
              "skip_execution": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RRZWFRFJ4T271OGhWuUeEQQqZ84aUy9GW",
            "name": "Condition Block",
            "title": "Check CSV Generated",
            "type": "logic.if_else",
            "base_type": "activity",
            "properties": {
              "conditions": [],
              "continue_on_failure": false,
              "description": "If-Else condition block",
              "display_name": "Check CSV Generated",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "blocks": [
              {
                "unique_name": "definition_activity_02RRZWFT5603Q1tcXmb4ziyxF577DIUD4Cq",
                "name": "Condition Branch",
                "title": "Did Generation Fail?",
                "type": "logic.condition_block",
                "base_type": "activity",
                "properties": {
                  "condition": {
                    "left_operand": "$activity.definition_activity_02RRX1VN31PUH0PEp0jQiKQlhJUTiB01evj.output.succeeded$",
                    "operator": "ne",
                    "right_operand": true
                  },
                  "continue_on_failure": false,
                  "display_name": "Did Generation Fail?",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02RRZYHWWD3KY1QY6LjoX1kK6zuvXT8huMQ",
                    "name": "Set Variables",
                    "title": "Set Output Variables",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "description": "Propagate Information to Output Variables",
                      "display_name": "Set Output Variables",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X$",
                          "variable_value_new": "$activity.definition_activity_02RRX1VN31PUH0PEp0jQiKQlhJUTiB01evj.output.error.code$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RS09IYKFB3G1VbmPyGAuhYKcZEOCIJYFG$",
                          "variable_value_new": "$activity.definition_activity_02RRX1VN31PUH0PEp0jQiKQlhJUTiB01evj.output.error.message$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ$",
                          "variable_value_new": "Workflow Failed to run Properly."
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RS0F7Q110264t1DxjemNpaNG4si6NZfa3",
                    "name": "Completed",
                    "title": "Workflow Completed",
                    "type": "logic.completed",
                    "base_type": "activity",
                    "properties": {
                      "completion_type": "failed-completed",
                      "continue_on_failure": false,
                      "description": "Completed action",
                      "display_name": "Workflow Completed",
                      "result_message": "Workflow Failed Generating CSV File. See Output Data for information on the failure.",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RRV9FVPW7C25Q4Bek95jEL2v3pR0pXz7p",
        "name": "Group",
        "title": "Write out New CSV File to Location Specified",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "description": "In this section the created CSV is pushed out to the configured Linux Host. ",
          "display_as_suggestion": false,
          "display_name": "Write out New CSV File to Location Specified",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RRV9FZL19K500Rc0FFZHGIRANumZEUfZ4",
            "name": "Write File",
            "title": "Write CSV File to Linux Host",
            "type": "terminal.write_file",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "content": "$activity.definition_activity_02RRX1VN31PUH0PEp0jQiKQlhJUTiB01evj.output.script_queries.csv_output$",
              "continue_on_failure": true,
              "description": "Writes content into a file that resides on a remote unix/linux machine\n\nUses the Local Variable to get the Directory and File Name Prefix",
              "display_name": "Write CSV File to Linux Host",
              "encoding": "utf-8",
              "file_name": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.local.variable_workflow_02RRV9EA9DQA90Yy32chGdSMfkTAfY0fDlW$$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.start_time$.csv",
              "options": "overwrite",
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target": true,
                "target_id": "definition_target_02Q03T512O6O63wll5dWT2XdqLLzH4ScirJ"
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RS0CJA2H5MA4pceFC4ff1xRln2o7XINHh",
            "name": "Condition Block",
            "title": "Check File was written",
            "type": "logic.if_else",
            "base_type": "activity",
            "properties": {
              "conditions": [],
              "continue_on_failure": false,
              "description": "Report back to the Operator if the CSV File was not properly pushed to the Linux Server",
              "display_name": "Check File was written",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "blocks": [
              {
                "unique_name": "definition_activity_02RS0CJA3NE3A13IeaY5XROXtkVRjmYCPiF",
                "name": "Condition Branch",
                "title": "CSV Push Failed",
                "type": "logic.condition_block",
                "base_type": "activity",
                "properties": {
                  "condition": {
                    "left_operand": "$activity.definition_activity_02RRV9FZL19K500Rc0FFZHGIRANumZEUfZ4.output.succeeded$",
                    "operator": "ne",
                    "right_operand": true
                  },
                  "continue_on_failure": false,
                  "description": "The Write to the Linux Host Target May not have succeeded",
                  "display_name": "CSV Push Failed",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02RS0CJA5BUM65POQwSXGp7iXjMUtLHxJM4",
                    "name": "Set Variables",
                    "title": "Set Output Variables",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "description": "Set Variables",
                      "display_name": "Set Output Variables",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X$",
                          "variable_value_new": "$activity.definition_activity_02RRV9FZL19K500Rc0FFZHGIRANumZEUfZ4.output.error.code$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RS09IYKFB3G1VbmPyGAuhYKcZEOCIJYFG$",
                          "variable_value_new": "$activity.definition_activity_02RRV9FZL19K500Rc0FFZHGIRANumZEUfZ4.output.error.message$"
                        },
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ$",
                          "variable_value_new": "Workflow Failed to run Properly."
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RS0FMA509MR3mg4YMNaCj8GOGvJBa3v04",
                    "name": "Completed",
                    "title": "Workflow Completed",
                    "type": "logic.completed",
                    "base_type": "activity",
                    "properties": {
                      "completion_type": "failed-completed",
                      "continue_on_failure": false,
                      "description": "Completed action",
                      "display_name": "Workflow Completed",
                      "result_message": "Failed to write CSV file. See Output Data for information on the failure.",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RS00ZPGLR0K3IAAYaylKzKYLmKG6tDtrc",
        "name": "Group",
        "title": "Workflow Completed Normally",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "description": "Workflow passed all steps and completed without error.",
          "display_as_suggestion": false,
          "display_name": "Workflow Completed Normally",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RS0169LM72O6KDLxShrOPwKNdjvllUG6K",
            "name": "Set Variables",
            "title": "Set Output Variables",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "description": "Set Variables",
              "display_name": "Set Output Variables",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9D11M1yZUXdmVF89Jxw88cI6h7O$",
                  "variable_value_new": "$activity.definition_activity_02RRX1VN31PUH0PEp0jQiKQlhJUTiB01evj.output.script_queries.csv_output$"
                },
                {
                  "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9DL730m9xNj92IfRsDSYN0cHj7X$",
                  "variable_value_new": "200"
                },
                {
                  "variable_to_update": "$workflow.definition_workflow_02RRV9E9QA06U1a2AJdlI6kJF5DCPs9RsBw.output.variable_workflow_02RRV9EA9CRLD4sJ9yogdlxxS7zUZtepoQQ$",
                  "variable_value_new": "Workflow Completed Successfully"
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ]
      }
    ],
    "categories": [
      "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
    ]
  },
  "targets": {
    "definition_target_02OGWOA691Y2R6SenTABdjAhM0VxK5p6Bov": {
      "unique_name": "definition_target_02OGWOA691Y2R6SenTABdjAhM0VxK5p6Bov",
      "name": "OpenAI Account Target",
      "title": "OpenAI Account Target",
      "type": "target.openai_endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "default_runtime_user_id": "definition_runtime_user_02OGWO7LBCKDE6U6tjixS0xXLTpAGx0jAJV",
        "description": "",
        "display_name": "OpenAI Account Target"
      }
    },
    "definition_target_02Q03T512O6O63wll5dWT2XdqLLzH4ScirJ": {
      "unique_name": "definition_target_02Q03T512O6O63wll5dWT2XdqLLzH4ScirJ",
      "name": "Linux Host",
      "title": "Linux Host",
      "type": "terminal.unix_linux_endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "bash_shell": "/bin/bash",
        "default_runtime_user_id": "definition_runtime_user_02Q03SUNVL3ML0wxkiZSbJQtPBVb4IblqF3",
        "description": "",
        "display_name": "Linux Host",
        "host": "192.168.7.62",
        "port": 22
      }
    }
  },
  "runtime_users": {
    "definition_runtime_user_02OGWO7LBCKDE6U6tjixS0xXLTpAGx0jAJV": {
      "unique_name": "definition_runtime_user_02OGWO7LBCKDE6U6tjixS0xXLTpAGx0jAJV",
      "name": "OpenAI Account Keys",
      "title": "OpenAI Account Keys",
      "type": "runtime_user.openai_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "base_type": "runtime_user",
        "display_name": "OpenAI Account Keys",
        "key": "*****",
        "title": "OpenAI Account Keys",
        "type": "runtime_user.openai_credentials",
        "unique_name": "definition_runtime_user_02OGWO7LBCKDE6U6tjixS0xXLTpAGx0jAJV"
      }
    },
    "definition_runtime_user_02Q03SUNVL3ML0wxkiZSbJQtPBVb4IblqF3": {
      "unique_name": "definition_runtime_user_02Q03SUNVL3ML0wxkiZSbJQtPBVb4IblqF3",
      "name": "Linux Host",
      "title": "Linux Host",
      "type": "runtime_user.terminal_key_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "base_type": "runtime_user",
        "display_name": "Linux Host",
        "key": "*****",
        "title": "Linux Host",
        "type": "runtime_user.terminal_key_credentials",
        "unique_name": "definition_runtime_user_02Q03SUNVL3ML0wxkiZSbJQtPBVb4IblqF3",
        "user": "jspetrucio"
      }
    }
  },
  "atomic_workflows": [
    "definition_workflow_02OARCKDXWKC05IDjPSq5F51WkIsFF0DF1K",
    "definition_workflow_02L9TZH5W95870XebPF2g8kSyIYcawUvljX"
  ],
  "dependent_workflows": [
    "definition_workflow_02M605GS81XN44qr4RBWrJ6Zazk7k0ArIYX",
    "definition_workflow_02OARCKDXWKC05IDjPSq5F51WkIsFF0DF1K",
    "definition_workflow_02L9TZH5W95870XebPF2g8kSyIYcawUvljX"
  ]
}